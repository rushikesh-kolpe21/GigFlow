{
    "sourceFile": "backend/Routers/Gig.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768303314466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768303314466,
            "name": "Commit-0",
            "content": "const express = require('express');\r\nconst router = express.Router();\r\nconst Gig = require('../Models/Gig');\r\nconst auth = require('../Middlewares/auth');\r\n\r\n// GET all gigs\r\nrouter.get('/', async (req, res) => {\r\n  try {\r\n    const search = req.query.search || \"\";\r\n\r\n    const gigs = await Gig.find({\r\n      status: \"open\",\r\n      title: { $regex: search, $options: \"i\" }\r\n    });\r\n\r\n    res.json(gigs);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\n// GET my posted jobs\r\nrouter.get(\"/my-jobs\", auth, async (req, res) => {\r\n  try {\r\n    const gigs = await Gig.find({ ownerId: req.user.id });\r\n    res.json(gigs);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\n// POST new gig\r\nrouter.post(\"/\", auth, async (req, res) => {\r\n  try {\r\n    const { title, description, budget } = req.body;\r\n\r\n    console.log(\" Creating gig for user:\", req.user.id);\r\n\r\n    if (!title || !description || !budget) {\r\n      return res.status(400).json({ error: \"All fields required\" });\r\n    }\r\n\r\n    const gig = await Gig.create({\r\n      title,\r\n      description,\r\n      budget,\r\n      ownerId: req.user.id,\r\n      status: \"open\"\r\n    });\r\n\r\n    console.log(\" Gig created:\", gig._id);\r\n    res.status(201).json(gig);\r\n  } catch (err) {\r\n    console.error(\" Gig creation error:\", err.message);\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;"
        }
    ]
}