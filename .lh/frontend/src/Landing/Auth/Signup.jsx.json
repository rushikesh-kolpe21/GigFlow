{
    "sourceFile": "frontend/src/Landing/Auth/Signup.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768152272477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768152272477,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { handleError, handleSuccess } from \"../../../utils\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport const Signup = ({ setIsAuthenticated = () => {} }) => {\r\n\r\n     const navigate = useNavigate();\r\n  // Redirect away if already logged in\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      navigate(\"/\", { replace: true });\r\n    }\r\n  }, [navigate]);\r\n\r\n  const [signupInfo, setSignupInfo] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const { firstName, lastName, email, password } = signupInfo;\r\n\r\n  // onchange handler\r\n  const handleChange = (event) => {\r\n    setSignupInfo({\r\n      ...signupInfo,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // form submit handler\r\n  const handleFormSubmitSignup = async (event) => {\r\n    event.preventDefault();\r\n\r\n    // Validation\r\n    const { firstName, lastName, email, password } = signupInfo;\r\n    if (!firstName || !lastName || !email || !password) {\r\n      return handleError(\"First name, last name, email and password are required\");\r\n    }\r\n\r\n    // If validation passes then\r\n   try {\r\n  const response = await axios.post(\r\n    \"http://localhost:5000/api/auth/register\",\r\n    signupInfo\r\n  );\r\n\r\n  const result = response.data;\r\n  const { user, message, success, token, jwtToken } = result;\r\n  console.log(\"Signup response:\", result);\r\n\r\n  if (success) {\r\n    handleSuccess(message);\r\n\r\n    const authToken = token || jwtToken;\r\n    if (authToken) {\r\n      localStorage.setItem(\"token\", authToken);\r\n    }\r\n\r\n    localStorage.setItem(\"loggedInUser\", user.name);\r\n    localStorage.setItem(\"userEmail\", user.email);\r\n    localStorage.setItem(\"userId\", user.id);\r\n\r\n    // clear form ONLY on success\r\n    setSignupInfo({\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n\r\n    setIsAuthenticated(true);\r\n    setTimeout(() => {\r\n      navigate(\"/\");\r\n    }, 800);\r\n  } else {\r\n    handleError(message || \"Signup failed\");\r\n  }\r\n} catch (error) {\r\n  console.error(\"Signup error:\", error);\r\n  handleError(\r\n    error.response?.data?.message || error.message || \"Signup failed\"\r\n  );\r\n}\r\n\r\n\r\n    console.log(\"Signup form submitted:\", signupInfo);\r\n  };\r\n\r\n\r\n return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\r\n      <div className=\"w-full max-w-md bg-white p-8 rounded-2xl shadow-lg\">\r\n        <h1 className=\"text-3xl font-bold text-center text-blue-600 mb-6\">\r\n          Create Account\r\n        </h1>\r\n        \r\n        {/* <GoogleLogin setIsAuthenticated={setIsAuthenticated}\r\n         onSuccess={(res) => {\r\n    console.log(res.credential); // âœ… ID TOKEN\r\n  }} /> */}\r\n\r\n        <form onSubmit={handleFormSubmitSignup} className=\"space-y-5 text-left\">\r\n          <div className=\"flex flex-col items-start\">\r\n            <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              FirstName\r\n            </label>\r\n            <input\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              autoFocus\r\n              id=\"firstName\"\r\n              name=\"firstName\"\r\n              type=\"text\"\r\n              placeholder=\"Enter your first name\"\r\n              value={firstName}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-start\">\r\n            <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              LastName\r\n            </label>\r\n            <input\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              id=\"lastName\"\r\n              name=\"lastName\"\r\n              type=\"text\"\r\n              placeholder=\"Enter your last name\"\r\n              value={lastName}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-start\">\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Email Address\r\n            </label>\r\n            <input\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              value={email}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-start\">\r\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Password\r\n            </label>\r\n            <input\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              value={password}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full py-2 mt-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition duration-200\"\r\n          >\r\n            Sign Up\r\n          </button>\r\n\r\n          <p className=\"text-center text-sm text-gray-600 mt-3\">\r\n            Already have an account?{\" \"}\r\n            <Link to=\"/login\" className=\"text-blue-600 font-medium hover:underline\">Login</Link>\r\n          </p>\r\n        </form>\r\n\r\n        <ToastContainer position=\"top-center\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n"
        }
    ]
}