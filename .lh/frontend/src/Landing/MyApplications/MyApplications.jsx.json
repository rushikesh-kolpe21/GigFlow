{
    "sourceFile": "frontend/src/Landing/MyApplications/MyApplications.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768361668823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768361668823,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\r\nimport api from \"../../api/axios\";\r\n\r\nfunction MyApplications() {\r\n  const [bids, setBids] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchBids = async () => {\r\n    try {\r\n      const res = await api.get('/api/bids/my');\r\n      setBids(res.data);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setBids([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBids();\r\n  }, []);\r\n\r\n  const deleteBid = async (bidId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this application?\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.delete(`/api/bids/${bidId}`);\r\n      \r\n      console.log(\"Delete response:\", response);\r\n      \r\n      // Remove bid from state after successful deletion\r\n      setBids(bids.filter(bid => bid._id !== bidId));\r\n      alert(\"Bid deleted successfully\");\r\n    } catch (err) {\r\n      console.error(\"Delete error:\", err);\r\n      console.error(\"Error response:\", err.response);\r\n      const errorMessage = err.response?.data?.message || err.message || \"Error deleting bid\";\r\n      alert(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-6xl mx-auto px-4 py-8\">\r\n\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h2 className=\"text-3xl font-bold text-gray-900\">\r\n            My Applications\r\n          </h2>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Track the status of jobs you’ve applied for.\r\n          </p>\r\n        </div>\r\n\r\n        {bids.length === 0 && (\r\n          <p className=\"text-gray-500\">No applications yet</p>\r\n        )}\r\n\r\n        {/* Applications Grid */}\r\n        <div className=\"\r\n          grid\r\n          grid-cols-1\r\n          md:grid-cols-2\r\n          gap-6\r\n        \">\r\n          {bids.map(bid => (\r\n            <div\r\n              key={bid._id}\r\n              className=\"\r\n                bg-white\r\n                border border-gray-200\r\n                rounded-xl\r\n                p-6\r\n                shadow-sm\r\n                hover:shadow-md\r\n                transition\r\n              \"\r\n            >\r\n              {/* Job Info */}\r\n              <div className=\"mb-4\">\r\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-1\">\r\n                  {bid.gigId?.title}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Budget: ₹{bid.gigId?.budget}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Bid Info */}\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                  Your Bid\r\n                </span>\r\n                <span className=\"text-lg font-semibold text-gray-900\">\r\n                  ₹{bid.price}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Status Button and Delete Button */}\r\n              <div className=\"flex items-center justify-between gap-2\">\r\n                <div className=\"flex justify-end flex-1\">\r\n                  {bid.status === \"pending\" && (\r\n                    <span className=\"\r\n                      px-4 py-1.5\r\n                      text-sm font-medium\r\n                      rounded-full\r\n                      bg-yellow-100\r\n                      text-yellow-700\r\n                    \">\r\n                      Pending\r\n                    </span>\r\n                  )}\r\n\r\n                  {bid.status === \"hired\" && (\r\n                    <span className=\"\r\n                      px-4 py-1.5\r\n                      text-sm font-medium\r\n                      rounded-full\r\n                      bg-green-100\r\n                      text-green-700\r\n                    \">\r\n                      Hired\r\n                    </span>\r\n                  )}\r\n\r\n                  {bid.status === \"rejected\" && (\r\n                    <span className=\"\r\n                      px-4 py-1.5\r\n                      text-sm font-medium\r\n                      rounded-full\r\n                      bg-red-100\r\n                      text-red-700\r\n                    \">\r\n                      Rejected\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                {bid.status === \"pending\" && (\r\n                  <button\r\n                    onClick={() => deleteBid(bid._id)}\r\n                    disabled={loading}\r\n                    className=\"\r\n                      px-3 py-1.5\r\n                      text-sm font-medium\r\n                      rounded-lg\r\n                      bg-red-100\r\n                      text-red-700\r\n                      hover:bg-red-200\r\n                      transition\r\n                      disabled:opacity-50\r\n                    \"\r\n                  >\r\n                    {loading ? \"...\" : \"Delete\"}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyApplications;\r\n"
        }
    ]
}